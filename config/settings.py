import os
from pydantic import BaseSettings
from typing import List, Dict, Any


class Settings(BaseSettings):
    """
    –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
    –í–ê–ñ–ù–û: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–æ–∫–µ–Ω—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!
    """
    
    # ========== –¢–ï–õ–ï–ì–†–ê–ú –ù–ê–°–¢–†–û–ô–ö–ò ==========
    # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —É @BotFather –≤ Telegram
    TELEGRAM_BOT_TOKEN: str = "YOUR_BOT_TOKEN_HERE"
    
    # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: ID –≤–∞—à–µ–≥–æ —Ç–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª–∞ (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å @ –∏–ª–∏ -100)
    TELEGRAM_CHANNEL_ID: str = "@your_channel_name"
    
    # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –í–∞—à Telegram ID (–ø–æ–ª—É—á–∏—Ç–µ —É @userinfobot)
    ADMIN_USER_ID: int = 0  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à ID
    
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞–¥–º–∏–Ω—ã (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
    ADMIN_IDS: List[int] = []
    
    # ========== –ò–ò –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø ==========
    # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: API –∫–ª—é—á Claude (Anthropic)
    CLAUDE_API_KEY: str = "your_claude_api_key_here"
    
    # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: API –∫–ª—é—á GigaChat (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
    GIGACHAT_CLIENT_ID: str = "your_gigachat_client_id"
    GIGACHAT_CLIENT_SECRET: str = "your_gigachat_client_secret"
    
    # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: OpenAI API –∫–ª—é—á
    OPENAI_API_KEY: str = ""
    
    # ========== –ë–ê–ó–ê –î–ê–ù–ù–´–• ==========
    # –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SQLite
    DATABASE_URL: str = "sqlite:///news_bot.db"
    
    # ========== –ü–ê–†–°–ò–ù–ì –ù–ê–°–¢–†–û–ô–ö–ò ==========
    # –°–ø–∏—Å–æ–∫ —Å–∞–π—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (–¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏)
    NEWS_SOURCES: List[Dict[str, Any]] = [
        {
            "name": "–ü—Ä–∏–º–µ—Ä RSS",
            "url": "https://lenta.ru/rss",
            "type": "rss",
            "enabled": True,
            "category": "–û–±—â–∏–µ –Ω–æ–≤–æ—Å—Ç–∏"
        },
        {
            "name": "–ü—Ä–∏–º–µ—Ä HTML –ø–∞—Ä—Å–∏–Ω–≥",
            "url": "https://example-news-site.com",
            "type": "html",
            "enabled": False,
            "category": "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",
            "selectors": {
                "title": "h1.title",
                "content": ".article-content",
                "link": "a.article-link"
            }
        }
    ]
    
    # ========== –ü–õ–ê–ù–ò–†–û–í–©–ò–ö ==========
    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö
    PARSING_INTERVAL: int = 30
    
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π –∑–∞ —Ä–∞–∑
    MAX_NEWS_PER_BATCH: int = 5
    
    # ========== –û–ë–†–ê–ë–û–¢–ö–ê –ù–û–í–û–°–¢–ï–ô ==========
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
    MAX_TITLE_LENGTH: int = 100
    
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–æ–≤–æ—Å—Ç–∏
    MAX_CONTENT_LENGTH: int = 1000
    
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏ –ò–ò –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
    USE_AI_PROCESSING: bool = True
    
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
    AUTO_PUBLISH: bool = False
    
    # ========== –ö–ê–¢–ï–ì–û–†–ò–ò –ò –°–ú–ê–ô–õ–ò–ö–ò ==========
    CATEGORIES: Dict[str, str] = {
        "–ü–æ–ª–∏—Ç–∏–∫–∞": "üèõÔ∏è",
        "–≠–∫–æ–Ω–æ–º–∏–∫–∞": "üí∞",
        "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏": "üíª",
        "–°–ø–æ—Ä—Ç": "‚öΩ",
        "–ö—É–ª—å—Ç—É—Ä–∞": "üé≠",
        "–ù–∞—É–∫–∞": "üî¨",
        "–ó–¥–æ—Ä–æ–≤—å–µ": "üè•",
        "–û–±—â–µ—Å—Ç–≤–æ": "üë•",
        "–ú–∏—Ä": "üåç",
        "–û–±—â–∏–µ –Ω–æ–≤–æ—Å—Ç–∏": "üì∞"
    }
    
    # ========== –õ–û–ì–ò–†–û–í–ê–ù–ò–ï ==========
    LOG_LEVEL: str = "INFO"
    LOG_FILE: str = "logs/bot.log"
    
    # ========== –ü–†–û–ö–°–ò (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ==========
    USE_PROXY: bool = False
    PROXY_URL: str = ""  # –ù–∞–ø—Ä–∏–º–µ—Ä: "socks5://127.0.0.1:9050"
    
    class Config:
        env_file = ".env"
        env_file_encoding = "utf-8"


# –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
settings = Settings()


# ========== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ö–û–ù–°–¢–ê–ù–¢–´ ==========
class Messages:
    """–°–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞"""
    
    WELCOME_ADMIN = """
üöÄ <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å News Bot!</b>

üì∞ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º –Ω–æ–≤–æ—Å—Ç–µ–π
ü§ñ –ò–ò –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞
üìä –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
    """
    
    HELP_ADMIN = """
üîß <b>–ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</b>

üì∞ <b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏:</b>
/start_parsing - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
/stop_parsing - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
/manual_parse - –†—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥
/pending_news - –ü–æ–∫–∞–∑–∞—Ç—å –Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
/publish_news [id] - –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å
/delete_news [id] - –£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å

‚öôÔ∏è <b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏:</b>
/settings - –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
/sources - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
/add_source - –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
/remove_source [id] - –£–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
/categories - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏

üìä <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</b>
/stats - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/logs - –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
/status - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

ü§ñ <b>–ò–ò —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</b>
/ai_settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ò–ò
/test_ai - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ò–ò
/reprocess_news [id] - –ü–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å –ò–ò

üîÑ <b>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫:</b>
/scheduler_status - –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
/set_interval [–º–∏–Ω—É—Ç—ã] - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–∞—Ä—Å–∏–Ω–≥–∞
    """


class AIPrompts:
    """–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –ò–ò –æ–±—Ä–∞–±–æ—Ç–∫–∏"""
    
    NEWS_PROCESSING = """
–¢—ã - —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª–µ.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. –°–æ–∑–¥–∞–π –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤)
2. –ü–µ—Ä–µ–ø–∏—à–∏ –Ω–æ–≤–æ—Å—Ç—å –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ (–¥–æ 1000 —Å–∏–º–≤–æ–ª–æ–≤)
3. –î–æ–±–∞–≤—å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —ç–º–æ–¥–∑–∏
4. –û–ø—Ä–µ–¥–µ–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –Ω–æ–≤–æ—Å—Ç–∏
5. –°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ç–æ—á–Ω–æ—Å—Ç—å

–ò—Å—Ö–æ–¥–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å:
–ó–∞–≥–æ–ª–æ–≤–æ–∫: {title}
–¢–µ–∫—Å—Ç: {content}
–ò—Å—Ç–æ—á–Ω–∏–∫: {source}

–û—Ç–≤–µ—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
{{
    "title": "–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫",
    "content": "–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç",
    "category": "–∫–∞—Ç–µ–≥–æ—Ä–∏—è",
    "emoji": "–æ—Å–Ω–æ–≤–Ω–æ–π —ç–º–æ–¥–∑–∏ –¥–ª—è –Ω–æ–≤–æ—Å—Ç–∏"
}}
"""

    CATEGORIZATION = """
–û–ø—Ä–µ–¥–µ–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ —Å–ø–∏—Å–∫–∞: {categories}

–ù–æ–≤–æ—Å—Ç—å: {text}

–û—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
"""